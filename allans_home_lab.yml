---
- name: Setup control node
  hosts: localhost
  gather_facts: no
  become: no
  
  roles:
    - control

- name: Apply baseline settings to all nodes
  hosts: all
  become: yes
  gather_facts: yes
  
  roles:
    - baseline

- name: Setup Cloudflare DNS tunneling
  hosts: cloudflare_nodes
  become: yes
  gather_facts: yes

  roles:
    - role: cloudflare

- name: Setup Docker and run containers
  import_playbook: docker/all.yml

# # RUN MEDIA SERVICES
# - import_playbook: media.yml

# # RUN MEDIA ACQUISITION SERVICES
# - import_playbook: media_acquisition.yml

# # SETUP K3S CLUSTER
# - import_playbook: k3s/all.yml
