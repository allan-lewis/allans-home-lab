prometheus:    
    prometheusSpec:
      storageSpec:
        volumeClaimTemplate:
          spec:
            storageClassName: longhorn
            resources:
              requests:
                storage: 128Gi

      additionalScrapeConfigs:
        - job_name: 'node-exporter'
          static_configs:
            - targets:
{% for node in groups['docker_nodes'] %}
              - '{{hostvars[node]['ansible_host']}}:{{ ports.prometheusNodeExporterPort }}'
{% endfor %}
        - job_name: 'cadvisor'
          static_configs:
            - targets:
{% for node in groups['docker_nodes'] %}
              - '{{hostvars[node]['ansible_host']}}:{{ ports.cadvisorPort }}'
{% endfor %}
        - job_name: 'uptime-kuma'
          scheme: https
          basic_auth:
            username: {{ credentials.uptimeKuma.username }}
            password: {{ credentials.uptimeKuma.password }}
          static_configs:
            - targets:
{% for node in k3s_prometheus.uptime_kuma_nodes %}
              - '{{ node.host }}:{{ node.port }}'
{% endfor %}
        - job_name: 'windows-exporter'
          static_configs:
            - targets:
{% for node in windows_nodes %}
              - '{{ node.host }}:{{ node.port }}'
{% endfor %}

grafana:
  persistence:
    enabled: true
    type: pvc
    existingClaim: grafana

alertmanager:
  alertmanagerSpec:
    storage: 
      volumeClaimTemplate:
        spec:
          storageClassName: longhorn
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 4Gi