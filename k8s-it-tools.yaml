## AHL
---
- name: Install IT Tools.
  hosts: homelab_talos_management_nodes[0]
  become: no
  gather_facts: no
  environment:
    K8S_AUTH_KUBECONFIG: "{{ homelab_k8s_kubeconfig_path }}"

  roles:
    - role: k8s_generic_service
      vars:
        homelab_k8s_namespace: "{{ homelab_k8s_it_tools_namespace | default('it-tools') }}"
        homelab_k8s_service_name: "{{ homelab_k8s_it_tools_service_name | default('it-tools-server') }}"
        homelab_k8s_container_name: "{{ homelab_k8s_it_tools_container_name | default('it-tools') }}"
        homelab_k8s_container_image: "{{ homelab_k8s_it_tools_container_image | default('ghcr.io/corentinth/it-tools:' + homelab_versions.k8s_it_tools) }}"
        homelab_k8s_service_port: "{{ homelab_k8s_it_tools_service_name | default(80) }}"
        homelab_k8s_traefik_routes:
          - host: "{{ homelab_k8s_it_tools_host }}"
