## AHL
---
- name: Install nginx.
  hosts: homelab_k8s_nginx_nodes
  become: no
  gather_facts: no
  environment:
    K8S_AUTH_KUBECONFIG: "{{ homelab_k8s_kubeconfig_path }}"
    
  roles:
    - role: k8s_generic_service
      vars:
        homelab_k8s_namespace: "{{ homelab_k8s_nginx_namespace | default('nginx') }}"
        homelab_k8s_service_name: "{{ homelab_k8s_nginx_service_name | default('nginx') }}"
        homelab_k8s_service_port: "{{ homelab_k8s_nginx_service_port | default(80) }}"
        homelab_k8s_container_name: "{{ homelab_k8s_nginx_container_name | default('nginx') }}"
        homelab_k8s_container_image: "{{ homelab_k8s_nginx_container_image | default('nginx:' + homelab_versions.k8s_nginx) }}"
        homelab_k8s_traefik_routes: "{{ homelab_k8s_nginx_routes }}"
