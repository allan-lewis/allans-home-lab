- name: Ensure that the {{ container.pretty_name }} volume(s) are present
  ansible.builtin.file:
    path: "{{ container_path.path }}"
    state: directory
    owner: "{{ container_path.owner | default(docker_volumes_owner) }}"
    group: "{{ container_path.group | default(docker_volumes_group) }}"
  with_items: "{{ container.paths | default([]) }}"
  loop_control:
    loop_var: container_path

- name: Ensure that the {{ container.pretty_name }} container is started
  community.docker.docker_container:
    container_default_behavior: no_defaults
    detach: yes
    name: "{{ container.name }}" 
    image: "{{ container.image }}"
    state: started
    recreate: "{{ container.recreate | default('yes') }}"
    pull: "{{ container.pull | default('yes') }}"
    restart_policy: "{{ container.restart_policy | default(docker_restart_policy) }}"
    published_ports: "{{ container.ports | default([]) }}"
    volumes: "{{ container.volumes | default([]) }}"
