- name: Ensure that Docker container(s) are up and running
  ansible.builtin.include_role:
    name: container
  vars:
    container: "{{ item }}"
    syncthing_config_volume: "{{ docker_volumes_directory }}/syncthing/config"
  with_items: 
    - name: "syncthing"
      pretty_name: "Syncthing"
      image: "lscr.io/linuxserver/syncthing:latest"
      paths: 
        - path: "{{ syncthing_config_volume }}"
      ports:
        - "{{ syncthing_http_port}}:8384/tcp"
        - 22000:22000/tcp
        - 22000:22000/udp
        - 21027:21027/udp
      volumes: 
        - "{{ syncthing_config_volume }}:/config" 
      environment:
        TZ: America/New_York
        PUID: "{{ container_uid }}"
        PGUID: "{{ container_gid }}"
